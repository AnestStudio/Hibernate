# Hibernate Native SQL Queries

<br />

Trong Hibernate, HQL hoặc Criteria Query cho phép chúng ta thực hiện hầu hết mọi truy vấn SQL mong muốn. Tuy nhiên, đôi khi về câu lệnh SQL được tạo ra bởi Hibernate chậm hoặc cần viết câu lệnh phức tạp và thích tạo câu lệnh SQL (SQL gốc) của riêng mình hơn. Với Hibernate cho chúng ta sử dụng Native SQL để thao tác với cơ sở dữ liệu, bao gồm các stored procedures, và tất cả các thao tác create, update, delete và select.

<br />

## 1. Defining and executing a native query

Để tạo đối tượng Native Query chúng ta sẽ sử dụng phương thức `createNativeQuery()` từ đối tượng __Session__:

<br />

### 1.1. Create native queries

Truy vấn SQL cơ bản nhất là để có được một danh sách các giá trị __column__ từ một hoặc nhiều bảng.

Ví dụ lấy tất cả __column__ từ bảng __User__
```java
try (Session session = HibernateUtil.getSessionFactory().openSession()) {
    Transaction transaction = session.beginTransaction();

    NativeQuery<Object> query = session.createNativeQuery("SELECT * FROM [User] WHERE user_id = ?", Object.class);
    Object[] objects = (Object[]) query.setParameter(1, 1).uniqueResult();
    System.out.println(Arrays.toString(objects));

    transaction.commit();
}
```

Output
```java
[2024-04-10 02:13:56.413, 2024-04-10 02:13:56.413, 1, 12345678, AnhDT]
```

SQL
```sql
[Hibernate] SELECT * FROM [User] WHERE user_id = ?
```

<br />

Ví dụ chỉ lấy column `username` và `password` từ bảng __User__
```java
try (Session session = HibernateUtil.getSessionFactory().openSession()) {
    Transaction transaction = session.beginTransaction();

    NativeQuery<Object> query = session.createNativeQuery(
        "SELECT username, password FROM [User] WHERE user_id = ?", 
        Object.class
    );
    Object[] objects = (Object[]) query.setParameter(1, 4).uniqueResult();
    System.out.println(Arrays.toString(objects));

    transaction.commit();
}
```

Output
```java
[AnhDT, 12345678]
```

SQL
```sql
[Hibernate] SELECT username, password FROM [User] WHERE user_id = ?
```

<br />

### 1.2. Create named native queries

<br />

### 1.3. Parameter binding

<br />

